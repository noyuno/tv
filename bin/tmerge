#!/bin/bash -e

if [ $# -lt 1 ]; then
    echo "require one keyword" >&2
    exit 1
fi

declare -a ret=()
while read line; do
    ret+=("$line")
done < <(find . -maxdepth 1 -type f -name '*'"$*"'*')

if [ ${#ret[@]} -eq 0 ]; then
    echo "keyword '$*' not found" >&2
    exit 1
else
    for ((i=0; i < ${#ret[@]}; i++)); do
        echo "${ret[$i]}"
    done
    echo ""
    read -p "continue?[Y/n]:" yn
    if [ "$yn" = "" -o "$yn" = "Y" -o "$yn" = "y" ]; then
        mkdir -p "$*"
        for ((i=0; i < ${#ret[@]}; i++)); do
            mv "${ret[$i]}" "$*"
        done
        tree "$*"
    fi
fi


